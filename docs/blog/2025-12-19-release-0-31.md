---
date: '2025-12-19'
title: 'Release 0.31.0'
description: 'Code coverage tracking with LCOV and HTML reports, minimum coverage thresholds, and lifecycle hook visibility.'
coverAlt: 'Code coverage tracking, HTML reports, and lifecycle visibility'

aside: false
---

# {{ $frontmatter.title }}

<time>{{ $formatDate($frontmatter.date) }}</time>

## üîß New features

### Code coverage tracking

Track line coverage for your bash scripts using the new coverage options. See the full <a href="/coverage">coverage documentation</a> for details.

::: code-group
```bash [Console only]
bashunit --coverage tests/
```
```bash [LCOV report]
bashunit --coverage-report coverage/lcov.info tests/
```
```bash [HTML report]
bashunit --coverage-report-html coverage/ tests/
```
:::

Coverage is tracked using Bash's DEBUG trap mechanism. You can customize which paths to track and exclude:

::: code-group
```bash [Custom paths]
bashunit --coverage --coverage-paths src/ lib/ tests/
```
```bash [Exclude patterns]
bashunit --coverage --coverage-exclude "tests/*,vendor/*" tests/
```
:::

The report shows covered and uncovered lines with color-coded highlighting, making it easy to identify gaps in your test coverage.

### Minimum coverage threshold

Enforce a minimum coverage percentage with `--coverage-min`:

::: code-group
```bash [Usage]
bashunit --coverage --coverage-min 80 tests/
```
```[Output]
Coverage: 75.5% (below minimum 80%)
Exit code: 1
```
:::

The test run fails if coverage falls below the threshold, useful for CI pipelines.

### Color-coded coverage output

Console coverage output uses color-coded thresholds:

- Below 50%: red
- 50-80%: yellow
- Above 80%: green

### Lifecycle hook visibility

See exactly how long your setup and teardown scripts take:

::: code-group
```[Output]
‚óè set_up_before_script                                               2.30s
‚úì Passed: My test                                                      45ms
‚óè tear_down_after_script                                              0.5s
```
:::

This helps identify slow setup and teardown operations that may be affecting your test suite performance. The output is suppressed in failures-only and parallel modes.

## üêõ Bug fixes

- Fixed `bench` command not working in standalone/installed bashunit (missing `benchmark.sh` in build)
- Fixed `helper::get_latest_tag` returning version with `^{}` suffix from annotated git tags
- Skip files with no matching tests when using `--filter`
- Fixed simple output without before/after script timing

---

See the full changelog on <a href="https://github.com/TypedDevs/bashunit/releases/tag/0.31.0">GitHub</a>
